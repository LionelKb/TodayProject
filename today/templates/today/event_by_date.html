{% extends 'today/base.html' %}

{% load staticfiles %}
{% load bootstrap3 %}

{% block title %}
    classement par dates
{% endblock %}

{% block content %}

    <div class="jumbotron" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
        <h1>
            {% if days|length > 1 and days|length <= 25 %}
                Les prochains jours
            {% elif days|length > 25 %}
                {{ days|first|date:"F Y"|capfirst}}
            {% else %}
                {{ days|first|date:"l d F Y"|capfirst }}
             {% endif %}
        </h1>
    </div>

    {# list_categories and list_events for the selected date only #}
    {% if event_types_list %}
        {% for event_type in event_types_list %}
        <div id="services" class="row">
            <h2>{{ event_type.label|capfirst }}</h2>
            {% if occurrences %}
                {% for occurrence in occurrences %}
                    {% if occurrence.event.event_type == event_type %}
                        <div class="col-sm-12 col-md-4">
                            <div class="thumbnail">
                                <img src="{{ occurrence.event.image.url }}" class="img-responsive" alt="..." />
                                <div class="caption">
                                    <h3><a href = {{ occurrence.get_absolute_url }}> {{ occurrence.event.title }} </a></h3>
                                    <p>{{ occurrence.event.description|slice:":100" }}...</p>
                                    <p role = presentation><strong>Début:</strong></p>
                                    <p role = presentation>
                                        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
                                         <a href="{% url 'daily_events' occurrence.start_time|date:'Y' occurrence.start_time|date:'m' occurrence.start_time|date:'d' %}"> {{ occurrence.start_time|date:"l d F" }}</a>
                                    </p>
                                    <p role = presentation>
                                        <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
                                        {{ occurrence.start_time|date:"H" }}h{{ occurrence.start_time|date:"i" }}
                                    </p>
                                    <p role = presentation><strong>Fin:</strong></p>
                                    <p role = presentation>
                                        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
                                        <a href="{% url 'daily_events' occurrence.end_time|date:'Y' occurrence.end_time|date:'m' occurrence.end_time|date:'d' %}"> {{ occurrence.end_time|date:"l d F" }}</a>
                                    </p>
                                    <p role = presentation>
                                        <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
                                        {{ occurrence.end_time|date:"H" }}h{{ occurrence.end_time|date:"i" }}
                                    </p>
                                    <p role = presentation>
                                        <span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
                                        {{ occurrence.event.address }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            {# if no occurence in the category #}
            {% else %}
                <p>Pas d'événements programmés</p>
            {% endif %}

        </div>
        {% endfor %}

        {# if no category#}
        {% else %}
        <div id="services" class="row">
                <h2>Pas de contenu pour la période sélectionnée</h2>
        </div>
    {% endif %}

{% endblock %}